# Overview
This is a simple demonstration app to retain and serve user notifications regarding
potential funding opportunities.

The content it serves is currently fake, generated by the [FactoryBoy](https://factoryboy.readthedocs.io/en/stable/index.html)
and [Faker](https://faker.readthedocs.io/en/master/) Python packages.


## TODOs
1. More constrained CORS policy
2. Authorization
3. Refactor notification repository into generic repository
4. Notification acknowledgement, ignore, save, etc. options
5. Formalized data entry mechanism


## API Endpoints
1. GET `/user/{user_id}/notifications`

## Application Structure
This application is leveraging [Serverless Framework](https://www.serverless.com/) 
to deploy an app to AWS with the following components using [serverless.yml](./serverless.yml)

1. API Gateway HTTP API
2. A single DynamoDB table to store User Notifications, keyed by user_id and notification_id
3. A Lambda function that the API Gateway will leverage to fetch notifications data
4. Sufficient IAM execution policy to grant the Lambda function access to the DynamoDB table


### Adding Data
Since the API consumer will not be the author of the notification content, there is no PUT/POST endpoint.

For now, data can be added using the [manual_testing](./manual_testing.py) script to generate and save data. 
This requires setting the `PERSONAL_AWS_ACCESS_KEY` and `PERSONAL_AWS_SECRET_KEY` environment variables
for an IAM user with sufficient access to `dynamodb:PutObject` permissions to the UserNotifications table.

## Deployment

### Dependencies

1. Python 3.8
2. Poetry
3. Docker Desktop (used for package installation)
4. NodeJS (to run Serverless commands)

### Steps
1. Configure an AWS profile named `personal` with appropriate IAM authorization
2. `npx sls deploy --aws-profile personal --stage dev`